</div>
    <script>
// --- User Menu Dropdown Functionality ---
document.getElementById('userMenuButton').addEventListener('click', function () {
    const dropdown = document.getElementById('userDropdown');

    dropdown.classList.toggle('hidden');
    dropdown.classList.toggle('opacity-0');
    dropdown.classList.toggle('scale-95');
    dropdown.classList.toggle('max-h-0');
});

// --- Like Button Functionality (Client-side simulation) ---
document.querySelectorAll('.like-button').forEach(button => {
    button.addEventListener('click', function() {
        // Find the like count span within the button
        const countSpan = this.querySelector('.post-like-count');
        
        // Get the current like count from the data attribute
        let currentLikes = parseInt(this.getAttribute('data-likes'));
        
        // Check if the button has already been "liked" (simple toggle)
        if (this.classList.contains('liked')) {
            // UNLIKE: decrement count and remove 'liked' state
            currentLikes--;
            this.classList.remove('liked');
            this.classList.remove('text-red-500'); // Remove the red heart color
            this.classList.add('text-gray-500'); // Restore gray color
            // In a real application, you'd send an AJAX request to the server to unlike
        } else {
            // LIKE: increment count and add 'liked' state
            currentLikes++;
            this.classList.add('liked');
            this.classList.add('text-red-500'); // Change heart color to red
            this.classList.remove('text-gray-500'); // Remove the gray color
            // In a real application, you'd send an AJAX request to the server to like
        }

        // Update the data attribute and the visible count
        this.setAttribute('data-likes', currentLikes);
        countSpan.textContent = currentLikes;
    });
}); // <--- END of Like Button Functionality
// ------------------------------------------------------------------

// --- NEW AJAX/Fetch Post Submission Functionality (START HERE) ---
document.getElementById('post-form').addEventListener('submit', function(event) {
    // 1. **STOP** the default form submission to prevent the page from reloading
    event.preventDefault();

    const form = event.target;
    // FormData captures all form fields (like 'post' text)
    const formData = new FormData(form);

    // 2. Send the data to the server (to the '/post' route)
    fetch(form.action, {
        method: 'POST',
        body: formData
    })
    .then(response => {
        // Check if the server responded successfully (status 200-299)
        if (!response.ok) {
            // If the server signals an error, throw an exception
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        // Assuming your backend sends a JSON response upon success (e.g., status: 'ok')
        return response.json(); 
    })
    .then(data => {
        // 3. SUCCESS: Handle the successful post submission
        
        // Clear the textarea field
        form.querySelector('textarea[name="post"]').value = '';

        // Provide simple user feedback
        alert('Post submitted successfully! Your current "Likes" were preserved.');
        
        // NOTE: To make the new post appear, you would need more advanced 
        // JavaScript logic here to dynamically create and insert the new post HTML.
        
    })
    .catch(error => {
        // 4. ERROR: Handle any network or server errors
        console.error('Error submitting post:', error);
        alert('An error occurred while posting: ' + error.message);
    });
});
// --- NEW AJAX/Fetch Post Submission Functionality (END HERE) ---

</script>
</body>
</html>
